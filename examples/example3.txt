input: {1} # auto mode

output: {
📦 Current Inventory (excluding expiring):
- Eggplant: 12 unit
- Olive oil: 1500 ml
- Sea salt: 500 grams
- Heirloom tomatoes: 10 unit
- Garlic: 20 cloves
- Basil: 50 grams
- Black pepper: 300 grams
- Lamb chops: 2 kg
- Freekeh: 2 kg
- Shrimp: 2.5 kg
- Chili: 10 unit
- White wine: 2 liters
- Butter: 1 kg
- Cream: 2 liters
- Cauliflower: 6 unit
- Lemon: 10 unit
- Artichoke: 6 unit
- Zucchini: 8 unit
- Yogurt: 500 grams
- Duck breast: 1.5 kg
- Honey: 300 grams
- Leeks: 6 stalk
- Dill: 50 grams
- Labneh: 500 grams
- Mushrooms: 1 kg
- Parmesan cheese: 500 grams
- Water: unlimited unit
- Salt: unlimited unit

⏳ Expiring Ingredients:
- Mint: 34.8 grams (Expires in 4 days)
- Beets: 1.52 unit (Expires in 4 days)
- Parsley: 66.99 grams (Expires in 2 days)
- Lemon zest: 2.52 unit (Expires in 1 days)
- Rosemary: 32.22 grams (Expires in 2 days)
- Sea bass: 3.77 fillet (Expires in 1 days)
- Crushed tomato: 0.63 kg (Expires in 1 days)

===========================================================================

🥣 choosing soup kitchen for today...

Best matching soup kitchen:
Name: עמותת לשובע המסעדה
Address: Chlenov St 18, Tel Aviv-Yafo
Distance: 3.15 km

===========================================================================

🧑‍🍳 Running recipe recommendation agent...
Recipe agent       [██████████████████████████████] 100%

Best matching recipes:
1. Charred Sea Bass with Mint and Lemon Zest Salsa
   Matched expiring ingredients: Mint, Parsley, Lemon zest, Sea bass
   Inventory ingredients: Olive oil, Sea salt, Lemon
   Missing ingredients: none
   Reason: Charred Sea Bass with Mint and Lemon Zest Salsa embodies HaSalon's Mediterranean ethos, highlighting fresh produce and live fire cooking.
2. Smoky Beet Carpaccio with Rosemary Honey Drizzle
   Matched expiring ingredients: Beets, Parsley, Rosemary
   Inventory ingredients: Olive oil, Sea salt, Honey
   Missing ingredients: none
   Reason: The Smoky Beet Carpaccio with Rosemary Honey Drizzle highlights HaSalon's produce-driven ethos, celebrating Israeli Mediterranean flavors with expiring beets and rosemary.
3. Fire-Roasted Eggplant Freekeh Salad with Crushed Tomato Dressing
   Matched expiring ingredients: mint, parsley, lemon zest, crushed tomato
   Inventory ingredients: eggplant, freekeh, water, salt, olive oil, garlic, chili
   Missing ingredients: none
   Reason: The Fire-Roasted Eggplant Freekeh Salad highlights HaSalon's Israeli Mediterranean roots, using mint and parsley to elevate its fresh, produce-driven flavors.

===========================================================================

🍽️ Running restaurant recommendation agent...

Best matching restaurants:
1. Humus Ronnen
   Matched ingredients: Parsley, Lemon zest
   Reason: Middle Eastern restaurant where parsley and lemon zest are commonly used in dishes like hummus and salads. Very close (0.49km).
2. Barbunia
   Matched ingredients: Sea bass, Rosemary
   Reason: Seafood-focused restaurant that can use sea bass and rosemary in their dishes. Close proximity (0.88km).
3. Market Vegan Restaurant
   Matched ingredients: Mint, Beets, Parsley
   Reason: Vegan restaurant likely to use fresh herbs like mint and parsley, as well as beets in salads or dishes. Nearby (0.89km).

===========================================================================

🧠 Running decision agent...
Sending request to LLM...
Received response from LLM

--- Final Decision Summary ---
COOK   (4 items):  Mint, Parsley, Lemon zest, Sea bass
  ↳ Recipe: Charred Sea Bass with Mint and Lemon Zest Salsa
  🧾 Reason (COOK): Highest coverage of expiring ingredients.
SELL   (1 items):  Beets
  ↳ Restaurant: Market Vegan Restaurant
  🧾 Reason (SELL): Stable to transport and in demand.
DONATE (2 items):  Rosemary, Crushed tomato
  ↳ Donation Center: עמותת לשובע המסעדה
  🧾 Reason (DONATE): Low demand and short time to expiry.
----------------------------

===========================================================================

🧑‍🍳 Sending selected recipe to kitchen...

================= SEND TO KITCHEN =================
👨‍🍳  Recipe: Charred Sea Bass with Mint and Lemon Zest Salsa
---------------------------------------------------
🧺  Ingredients:
  • Mint
  • Parsley
  • Lemon zest
  • Sea bass
  • Olive oil
  • Sea salt
  • Lemon
---------------------------------------------------
🧾  Chef Notes / Reason:
  Charred Sea Bass with Mint and Lemon Zest Salsa embodies HaSalon's Mediterranean ethos, highlighting fresh produce and live fire cooking.
===================================================


===========================================================================

✉️ Preparing outbound messages...

====== Message to restaurant ======
 Hi Market Vegan Restaurant, this is HaSalon! We have some high-quality surplus ingredients available today—here’s what we can offer:

- Beets: 1.52 units (expires in 4 days) - ₪8/unit, subtotal: ₪12.16

Bundle offer: Take everything for ₪10!
Pickup window: Today, 12:00–18:00.
Contact us at 052-1234567 to confirm.

Looking forward to hearing from you!

====== Message to soup kitchen ======
 Hi, this is HaSalon in Tel Aviv. We have a same-day donation of fresh ingredients for you:

- Rosemary: 32.22 grams, expires in 2 days
- Crushed tomato: 0.63 kg, expires in 1 day

Pickup is available today between 16:00-18:00. Please contact us at 052-1234567 to coordinate. Thank you!

===========================================================================

📊 Checking if feedback agent should run -- asking for feedback only each 10 iterations of the agent...

📣 Feedback Suggestions:
- Sea bass: reduce by ~2 fillet
  Reason: Sea bass appears frequently with high leftover quantities (e.g., 2.04, 2.95, 3.47, 3.77 fillets) and short expiration times, indicating consistent overstocking.
- Mushrooms: reduce by ~0.5 kg
  Reason: Mushrooms consistently appear as leftovers (e.g., 0.78, 0.62, 0.48 kg) with short expiration times, suggesting over-purchasing.
- Basil: reduce by ~30 grams
  Reason: Basil frequently appears as leftovers (e.g., 31.45, 32.44 grams) with short expiration times, indicating overstocking.
- Parsley: reduce by ~50 grams
  Reason: Parsley appears repeatedly with high leftover quantities (e.g., 64.79, 66.99, 99 grams) and short expiration times, suggesting over-purchasing.
- Rosemary: reduce by ~20 grams
  Reason: Rosemary shows recurring excess (e.g., 23.02, 30.0, 32.22 grams) with short expiration times, indicating consistent overstocking.
- Beets: reduce by ~2 unit
  Reason: Beets frequently appear as leftovers (e.g., 2.53, 2.62, 4.0 units) with short expiration times, suggesting over-purchasing.
- Cream: reduce by ~0.5 liters
  Reason: Cream appears multiple times with leftover quantities (e.g., 0.98, 1.4 liters) and short expiration times, indicating overstocking.
- Honey: reduce by ~100 grams
  Reason: Honey consistently appears as leftovers (e.g., 173.84, 100 grams) with very short expiration times, suggesting over-purchasing.

✅ Simulation complete.
}